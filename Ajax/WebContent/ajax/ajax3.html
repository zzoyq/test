<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>

	<script src="http://code.jquery.com/jquery-latest.min.js"></script>

</head>
<body>
	<!-- 
		 ID중복 체크 하기 버튼을 클릭하면 텍스트 박스에 입력한 ID를  .val()메소드를 통해 가져와
		 ajax기술을 이용해서  서블릿으로 전송합니다.
		 그러면 서블릿에서 DB와 연동하여 아이디중복확인여부를 체크하고
		 체크한 여부값을 현재페이지로 응답  받아 사용함.
	 -->
	 
	 <input type="text" id="t_id"/>
	 <input type="button" id="btn_duplicate" value="ID중복체크" onclick="fn_process()" />
	 <br><br>
	 <!-- 아이디 중복이냐 아이디 중복 아니냐 중 하나를 출력 -->
	 <div id="message"></div>
	 
	 <script type="text/javascript">
	 	
	 	function fn_process(){
	 		
	 		//아이디 입력란에 입력한 ID를 가져옵니다.
	 		var _id = $("#t_id").val();
	 		
	 		//아이디를 입력하지 않았다면
	 		if(_id == ''){
	 			window.alert("ID를 입력 하세요");
	 			return;
	 		}
	 		
	 		//아이디를 입력 했다면~ 입력한 아이디를 서블릿 클래스로 전송하여 
	 		//DB에 저장되어 있는 ID와 비교 하여 중복 여부를 체크 합니다.
	 		
	 		$.ajax({
	 				type:"post",
	 				async:false,
	 				url:"http://localhost:8080/Ajax/mem",
	 				data:{id:_id},
	 				dataType:"text",
	 				success:function(data,textStatus){
	 					//서블릿 클래스로 부터 응답받은 메세지를  표시 한다.
	 					if(data == 'usable'){//아이디 중복 아님
	 					
	 						$("#message").text("사용할수 있는 ID입니다.");
	 					
	 						//사용할수 있는 ID면  버튼을 비활성화 시키기 
	 						$("#btn_duplicate").prop("disabled",true);
	 						
	 					}else{//아이디 중복
	 						$("#message").text("사용할수 없는 ID입니다.");
	 					}
	 				},
	 				error:function(){
	 					alert("에러가 발생했습니다.");
	 				}
	 		}); 
	 				
	 	}
	 
	 
	 </script>

</body>
</html>







